<html>
  <head>
    <title></title>
    <script type="text/javascript">
      window.onload = function () {
        document
          .getElementsByTagName("button")[0]
          .addEventListener("click", function (e) {
            var shop = new URLSearchParams(window.location.search).get("shop");
            console.log(window.location.search);
            e.preventDefault();

            var xmlhttp = new XMLHttpRequest(); // new HttpRequest instance
            xmlhttp.open("POST", "/butter-cms/config" + window.location.search);
            xmlhttp.onload = function () {
              console.log("response", xmlhttp.responseText);
              if (xmlhttp.status === 200) {
                alert("All set");
              } else if (xmlhttp.status !== 200) {
                alert("Request failed.  Returned status of " + xmlhttp.status);
              }
            };
            xmlhttp.setRequestHeader(
              "Content-Type",
              "application/json;charset=UTF-8"
            );
            xmlhttp.send(
              JSON.stringify({
                butterCMSId: document.getElementById("butter_cms_id").value,
              })
            );
          });
      };
    </script>
  </head>
  <body>
    <form>
      <input
        id="butter_cms_id"
        name="butter-cms-id"
        placeholder="Butter CMS ID"
      />
      <button type="submit">Save</button>
    </form>
  </body>
</html>
